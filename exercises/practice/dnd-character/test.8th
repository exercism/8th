import {unitt}!
import {src/dnd-character}!

suite "D&D Character"[
    test "ability modifier for score 3 is neg 4" [
        result: modifier 3
        assert -> neg 4 = result
    ]

    test.skip "ability modifier for score 4 is neg 3" [
        result: modifier 4
        assert -> neg 3 = result
    ]

    test.skip "ability modifier for score 5 is neg 3" [
        result: modifier 5
        assert -> neg 3 = result
    ]

    test.skip "ability modifier for score 6 is neg 2" [
        result: modifier 6
        assert -> neg 2 = result
    ]

    test.skip "ability modifier for score 7 is neg 2" [
        result: modifier 7
        assert -> neg 2 = result
    ]

    test.skip "ability modifier for score 8 is neg 1" [
        result: modifier 8
        assert -> neg 1 = result
    ]

    test.skip "ability modifier for score 9 is neg 1" [
        result: modifier 9
        assert -> neg 1 = result
    ]

    test.skip "ability modifier for score 10 is 0" [
        result: modifier 10
        assert -> 0 = result
    ]

    test.skip "ability modifier for score 11 is 0" [
        result: modifier 11
        assert -> 0 = result
    ]

    test.skip "ability modifier for score 12 is +1" [
        result: modifier 12
        assert -> 1 = result
    ]

    test.skip "ability modifier for score 13 is +1" [
        result: modifier 13
        assert -> 1 = result
    ]

    test.skip "ability modifier for score 14 is +2" [
        result: modifier 14
        assert -> 2 = result
    ]

    test.skip "ability modifier for score 15 is +2" [
        result: modifier 15
        assert -> 2 = result
    ]

    test.skip "ability modifier for score 16 is +3" [
        result: modifier 16
        assert -> 3 = result
    ]

    test.skip "ability modifier for score 17 is +3" [
        result: modifier 17
        assert -> 3 = result
    ]

    test.skip "ability modifier for score 18 is +4" [
        result: modifier 18
        assert -> 4 = result
    ]

: ability-valid? \ n -- t
    3 18 n:between
;    test.skip "random ability is within range" [
        result: abilityValid? ability
        assert -> true = result
    ]

"random character is valid"
    ( character >r
      r@ "strength"     m:@ ability-valid? nip       
      r@ "dexterity"    m:@ ability-valid? nip and
      r@ "constitution" m:@ ability-valid? nip and
      r@ "intelligence" m:@ ability-valid? nip and
      r@ "wisdom"       m:@ ability-valid? nip and
      r@ "charisma"     m:@ ability-valid? nip and       
      r@ "constitution" m:@ nip modifier 10 n:+ r> "hitpoints" m:@ nip n:= and
   )    
    true?



]
